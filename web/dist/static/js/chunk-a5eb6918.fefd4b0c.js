(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-a5eb6918"],{"133c":function(e,s,t){"use strict";t("a94f")},"2dde":function(e,s,t){"use strict";t.r(s);var r=function(){var e=this,s=e.$createElement,t=e._self._c||s;return t("el-form",{ref:"form",attrs:{model:e.user,rules:e.rules,"label-width":"80px"}},[t("el-form-item",{attrs:{label:"用户昵称",prop:"nickname"}},[t("el-input",{model:{value:e.user.nickname,callback:function(s){e.$set(e.user,"nickname",s)},expression:"user.nickname"}})],1),t("el-form-item",{attrs:{label:"手机号码",prop:"mobile"}},[t("el-input",{attrs:{maxlength:"11"},model:{value:e.user.mobile,callback:function(s){e.$set(e.user,"mobile",s)},expression:"user.mobile"}})],1),t("el-form-item",{attrs:{label:"邮箱",prop:"email"}},[t("el-input",{attrs:{maxlength:"50"},model:{value:e.user.email,callback:function(s){e.$set(e.user,"email",s)},expression:"user.email"}})],1),t("el-form-item",{attrs:{label:"性别"}},[t("el-radio-group",{model:{value:e.user.sex,callback:function(s){e.$set(e.user,"sex",s)},expression:"user.sex"}},[t("el-radio",{attrs:{label:3}},[e._v("保密")]),t("el-radio",{attrs:{label:1}},[e._v("男")]),t("el-radio",{attrs:{label:2}},[e._v("女")])],1)],1),t("el-form-item",[t("el-button",{attrs:{type:"primary",size:"mini"},on:{click:e.submit}},[e._v("保存")]),t("el-button",{attrs:{type:"danger",size:"mini"},on:{click:e.close}},[e._v("关闭")])],1)],1)},a=[],i=t("c0c7"),l={props:{user:{type:Object}},data:function(){return{rules:{nickname:[{required:!0,message:"用户昵称不能为空",trigger:"blur"}],email:[{required:!0,message:"邮箱地址不能为空",trigger:"blur"},{type:"email",message:"'请输入正确的邮箱地址",trigger:["blur","change"]}],mobile:[{required:!0,message:"手机号码不能为空",trigger:"blur"},{pattern:/^1[3|4|5|6|7|8|9][0-9]\d{8}$/,message:"请输入正确的手机号码",trigger:"blur"}]}}},methods:{submit:function(){var e=this;this.$refs["form"].validate((function(s){s&&(e.submitLoading=!0,e.user.sex=e.user.sex,Object(i["k"])(e.user).then((function(s){if(e.submitLoading=!1,200!=s.code)return e.msgError(s.msg);e.msgSuccess("个人资料修改成功")})))}))},close:function(){this.$store.dispatch("tagsView/delView",this.$route),this.$router.push({path:"/index"})}}},o=l,n=t("cba8"),u=Object(n["a"])(o,r,a,!1,null,null,null);s["default"]=u.exports},3823:function(e,s,t){"use strict";t.r(s);var r=function(){var e=this,s=e.$createElement,t=e._self._c||s;return t("el-form",{ref:"form",attrs:{model:e.user,rules:e.rules,"label-width":"80px"}},[t("el-form-item",{attrs:{label:"旧密码",prop:"oldPassword"}},[t("el-input",{attrs:{placeholder:"请输入旧密码",type:"password"},model:{value:e.user.oldPassword,callback:function(s){e.$set(e.user,"oldPassword",s)},expression:"user.oldPassword"}})],1),t("el-form-item",{attrs:{label:"新密码",prop:"newPassword"}},[t("el-input",{attrs:{placeholder:"请输入新密码",type:"password"},model:{value:e.user.newPassword,callback:function(s){e.$set(e.user,"newPassword",s)},expression:"user.newPassword"}})],1),t("el-form-item",{attrs:{label:"确认密码",prop:"confirmPassword"}},[t("el-input",{attrs:{placeholder:"请确认密码",type:"password"},model:{value:e.user.confirmPassword,callback:function(s){e.$set(e.user,"confirmPassword",s)},expression:"user.confirmPassword"}})],1),t("el-form-item",[t("el-button",{attrs:{type:"primary",loading:e.submitLoading,size:"mini"},on:{click:e.submit}},[e._v("保存")]),t("el-button",{attrs:{type:"danger",size:"mini"},on:{click:e.close}},[e._v("关闭")])],1)],1)},a=[],i=t("c0c7"),l={data:function(){var e=this,s=function(s,t,r){e.user.newPassword!==t?r(new Error("两次输入的密码不一致")):r()};return{submitLoading:!1,user:{oldPassword:void 0,newPassword:void 0,confirmPassword:void 0},rules:{oldPassword:[{required:!0,message:"旧密码不能为空",trigger:"blur"}],newPassword:[{required:!0,message:"新密码不能为空",trigger:"blur"},{min:6,max:20,message:"长度在 6 到 20 个字符",trigger:"blur"}],confirmPassword:[{required:!0,message:"确认密码不能为空",trigger:"blur"},{required:!0,validator:s,trigger:"blur"}]}}},methods:{submit:function(){var e=this;this.$refs["form"].validate((function(s){if(!s)return e.$message({showClose:!0,message:"表单校验失败",type:"error"}),!1;e.submitLoading=!0,Object(i["b"])({oldPassword:e.user.oldPassword,newPassword:e.user.newPassword}).then((function(s){if(e.submitLoading=!1,200!=s.code)return e.msgError(s.msg);e.close(),e.msgSuccess("密码修改成功，请重新登录"),setTimeout((function(){store.dispatch("user/logout").then((function(){location.reload()}))}),1500)}))}))},close:function(){this.$store.dispatch("tagsView/delView",this.$route),this.$router.push({path:"/index"})}}},o=l,n=t("cba8"),u=Object(n["a"])(o,r,a,!1,null,null,null);s["default"]=u.exports},a94f:function(e,s,t){},ecac:function(e,s,t){"use strict";t.r(s);var r=function(){var e=this,s=e.$createElement,t=e._self._c||s;return t("div",{staticClass:"app-container"},[e.user?t("div",[t("el-row",{attrs:{gutter:20}},[t("el-col",{attrs:{span:6,xs:24}},[t("el-card",{staticClass:"box-card"},[t("div",{staticClass:"clearfix",attrs:{slot:"header"},slot:"header"},[t("span",[e._v("个人信息")])]),t("div",[t("div",{staticClass:"text-center"},[t("userAvatar",{attrs:{user:e.user}})],1),t("ul",{staticClass:"list-group list-group-striped"},[t("li",{staticClass:"list-group-item"},[t("svg-icon",{attrs:{"icon-class":"user"}}),e._v("用户名称 "),t("div",{staticClass:"pull-right"},[e._v(e._s(e.user.username))])],1),t("li",{staticClass:"list-group-item"},[t("svg-icon",{attrs:{"icon-class":"phone"}}),e._v("手机号码 "),t("div",{staticClass:"pull-right"},[e._v(e._s(e.user.mobile))])],1),t("li",{staticClass:"list-group-item"},[t("svg-icon",{attrs:{"icon-class":"email"}}),e._v("用户邮箱 "),t("div",{staticClass:"pull-right"},[e._v(e._s(e.user.email))])],1),t("li",{staticClass:"list-group-item"},[t("svg-icon",{attrs:{"icon-class":"tree"}}),e._v("所属岗位 "),e.user.deptInfo?t("div",{staticClass:"pull-right"},[e._v(e._s(e.user.deptInfo.deptName))]):e._e()],1),t("li",{staticClass:"list-group-item"},[t("svg-icon",{attrs:{"icon-class":"tree"}}),e._v("所属部门 "),e.user.deptInfo?t("div",{staticClass:"pull-right"},[e._v(e._s(e.postGroup))]):e._e()],1),t("li",{staticClass:"list-group-item"},[t("svg-icon",{attrs:{"icon-class":"peoples"}}),e._v("所属角色 "),t("div",{staticClass:"pull-right"},[e._v(e._s(e.roleGroup))])],1),t("li",{staticClass:"list-group-item"},[t("svg-icon",{attrs:{"icon-class":"el-date"}}),e._v("创建日期 "),t("div",{staticClass:"pull-right"},[e._v(e._s(e.user.createdAt))])],1)])])])],1),t("el-col",{attrs:{span:18,xs:24}},[t("el-card",[t("div",{staticClass:"clearfix",attrs:{slot:"header"},slot:"header"},[t("span",[e._v("基本资料")])]),t("el-tabs",{model:{value:e.activeTab,callback:function(s){e.activeTab=s},expression:"activeTab"}},[t("el-tab-pane",{attrs:{label:"基本资料",name:"userinfo"}},[t("userInfo",{attrs:{user:e.user}})],1),t("el-tab-pane",{attrs:{label:"修改密码",name:"resetPwd"}},[t("resetPwd",{attrs:{user:e.user}})],1)],1)],1)],1)],1)],1):e._e()])},a=[],i=(t("053b"),function(){var e=this,s=e.$createElement,t=e._self._c||s;return t("div",{staticClass:"pan-item",style:{zIndex:e.zIndex,height:e.height,width:e.width}},[t("div",{staticClass:"pan-info"},[t("div",{staticClass:"pan-info-roles-container"},[e._t("default")],2)]),t("div",{staticClass:"pan-thumb",style:{backgroundImage:"url("+e.image+")"}})])}),l=[],o=(t("513c"),{name:"PanThumb",props:{image:{type:String,required:!0},zIndex:{type:Number,default:1},width:{type:String,default:"150px"},height:{type:String,default:"150px"}}}),n=o,u=(t("133c"),t("cba8")),c=Object(u["a"])(n,i,l,!1,null,"799537af",null),d=c.exports,m=t("3823"),p=t("2dde"),f=t("c0c7"),g={name:"Profile",components:{PanThumb:d,userInfo:p["default"],resetPwd:m["default"]},data:function(){return{user:{},activeTab:"userinfo"}},computed:{postGroup:function(){return Array.isArray(this.user.posts)?this.user.posts.reduce((function(e,s,t,r){return e+s.postName+" "}),""):""},roleGroup:function(){return Array.isArray(this.user.roles)?this.user.roles.reduce((function(e,s,t,r){return e+s.name+" "}),""):""}},created:function(){this.getUser()},methods:{getUser:function(){var e=this;Object(f["g"])().then((function(s){e.user=s.data}))}}},b=g,v=Object(u["a"])(b,r,a,!1,null,null,null);s["default"]=v.exports}}]);